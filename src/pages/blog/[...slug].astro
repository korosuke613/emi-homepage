---
import blogJson from "../../../generated/blogs.json";
import type { Languages } from "../../i18n/ui";
import Blog from "../../layouts/Blog.astro";
import type { BlogSchema } from "../../utils/microcms";

export async function getStaticPaths() {
  const blogs = blogJson.contents as BlogSchema[];

  return blogs.map((blog) => {
    // スラッシュを除去してslugを正規化
    const normalizedSlug = blog.slug.startsWith("/")
      ? blog.slug.slice(1)
      : blog.slug;
    return { params: { slug: normalizedSlug }, props: blog };
  });
}

const blog = Astro.props;
---

<Blog blog={blog} />
