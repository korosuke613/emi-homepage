---
import { Box } from "@mui/joy";
import { LanguageFallbackNotice } from "../components/Blog/LanguageFallbackNotice";
import { Typography } from "../components/Typography";
import type { Languages } from "../i18n/ui";
import type { BlogSchema } from "../utils/microcms";
import Layout from "./Layout.astro";

type Props = {
  blog: BlogSchema;
  lang: Languages;
};

const { blog, lang } = Astro.props;

const availableLanguages = blog.language;
const isCurrentLanguageSupported = availableLanguages.includes(lang);
---

<Layout title={blog.title} description={""} lang={lang} noindex={!isCurrentLanguageSupported}>
  <Box sx={{
    padding: { xs: "1rem", sm: "2rem" },
    maxWidth: "800px",
    margin: "0 auto",
    figure: {
      margin: "0",
      textAlign: "center",
    },
    img: {
      width: "60%",
      height: "auto",
    },
  }}>
  <LanguageFallbackNotice blog={blog} currentLang={lang} client:visible />
  <Typography>{blog.createdAt}</Typography>
  <Box set:html={blog.content} sx={{
    "& p": {
      wordBreak: "break-all",
      textWrap: "auto",
    },
  }}/>      
  </Box>
</Layout>
